<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StayNest</title>
  <% layout("/layouts/boilerplate1.ejs") -%>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/home.css">
</head>
<body>

<!-- Skeleton Loader -->
<div id="skeleton-loader">
  <div class="skeleton skeleton-hero"></div>
  <div class="skeleton skeleton-services"></div>
  <div class="skeleton skeleton-destinations"></div>
  <div class="skeleton skeleton-testimonials"></div>
</div>

<!-- Main Content -->
<div id="main-content" style="display:none;">
<header>
  <nav class="navbar">
    <div class="logo">Stay<span>Nest</span></div>

    <!-- Nav Links -->
    <ul class="nav-links">
      <li><a href="/listings">Destinations</a></li>
      <li><a href="/account">Bookings</a></li>
      <li><a href="/login">Login</a></li>
      <li><a href="/signup">Sign Up</a></li>
    </ul>

    <!-- Hamburger -->
    <div class="hamburger">
      <div class="line1"></div>
      <div class="line2"></div>
      <div class="line3"></div>
    </div>
  </nav>
</header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-text">
      <h1>Stay, enjoy and live a new and full life</h1>
      <p>
        Built where longer admin do barton vanity itself do it in.
        Preferred to sportsman it engaged learning. Park gate sel they west hard for the.
      </p>
      <div class="hero-buttons">
        <a href="/listings" class="btn">Find out more</a>
      </div>
    </div>
    <div class="hero-image">
      <img src="/images/hero-traveler.png" alt="Traveler">
    </div>
  </section>

  <!-- Services -->
  <section class="services">
    <h2>We Offer Best Services</h2>
    <div class="service-cards">
      <div class="service">
        <img src="/images/cloudy.png" alt="Weather" class="icon-hover">
        <h3>Calculated Weather</h3>
        <p>Buffi Vected longer admin do barton vanity itself do in it.</p>
      </div>
      <div class="service">
        <img src="/images/residence.png" alt="Stays" class="icon-hover">
        <h3>Best Stays</h3>
        <p>Engressed lezzning. Park gate set they wer hard to.</p>
      </div>
      <div class="service">
        <img src="/images/location.png" alt="Events" class="icon-hover">
        <h3>Local Events</h3>
        <p>Preferred to men it in. It seil in engrossed lezzning.</p>
      </div>
      <div class="service">
        <img src="/images/hand.png" alt="Customize" class="icon-hover">
        <h3>Customization</h3>
        <p>We deliver outsource custom solutions to customers.</p>
      </div>
    </div>
  </section>

  <!-- Top Destinations -->
  <section class="destinations" id="destinations">
    <h2>Top Destinations</h2>

    <% if (allListings && allListings.length > 0) { %>
      <div class="homepage-listings">
        <div class="row row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-2 g-4">
          <% allListings.slice(0, 4).forEach(listing => { %>
            <div class="col">
              <a href="/listings/<%= listing._id %>" class="text-decoration-none text-dark">
                <div class="card listing-card shadow-sm">
                  <div class="image-wrapper">
                    <img src="<%= listing.image.url %>" class="card-img-top" alt="<%= listing.title %>">
                  </div>
                  <div class="card-body p-2">
                    <h6 class="card-title fw-bold mb-1"><%= listing.title %></h6>
                    <div class="d-flex justify-content-between align-items-center">
                      <span class="price fw-bold">₹<%= listing.price %></span>
                      <span class="location text-muted">
                        <i class="bi bi-geo-alt-fill"></i> <%= listing.country %>
                      </span>
                    </div>
                  </div>
                </div>
              </a>
            </div>
          <% }) %>
        </div>
      </div>
    <% } else { %>
      <!-- Fallback Dummy Listings -->
      <div class="destination-cards">
        <div class="destination">
          <div class="image-container">
            <img src="https://i.natgeofe.com/k/a6c9f195-de20-445d-9d36-745ef56042c5/OG_Colosseum_Ancient-Rome_KIDS_1122_square.jpg" alt="Rome">
            <div class="overlay"><a href="#" class="btn">Explore</a></div>
          </div>
          <h3>Rome, Italy</h3>
          <p>16 Days Trip</p>
          <span>3.4k</span>
        </div>
        <div class="destination">
          <div class="image-container">
            <img src="https://babylontours.com/wp-content/uploads/2016/09/london-441853_960_720.jpg" alt="London">
            <div class="overlay"><a href="#" class="btn">Explore</a></div>
          </div>
          <h3>London, UK</h3>
          <p>7 Days Trip</p>
          <span>4.2k</span>
        </div>
        <div class="destination">
          <div class="image-container">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRTvlBkzEE4QrZCEUdJ9-0InXH_B9LxhIBvZg&s" alt="Santorini">
            <div class="overlay"><a href="#" class="btn">Explore</a></div>
          </div>
          <h3>Santorini, Greece</h3>
          <p>9 Days Trip</p>
          <span>4.5k</span>
        </div>
      </div>
    <% } %>
  </section>

  <!-- Testimonials -->
  <section class="testimonials">
    <h2>What Our Customers Say</h2>
    <div class="testimonial-cards">
      <div class="testimonial">
        <div class="quote-icon">"</div>
        <p>"StayNest made booking so easy and convenient! I loved my trip to Rome."</p>
        <h4>— Sarah J.</h4>
      </div>
      <div class="testimonial">
        <div class="quote-icon">"</div>
        <p>"Amazing user experience and great property options. Highly recommend!"</p>
        <h4>— Michael B.</h4>
      </div>
      <div class="testimonial">
        <div class="quote-icon">"</div>
        <p>"The booking system and dashboard are seamless. Will use again."</p>
        <h4>— Emily R.</h4>
      </div>
    </div>
  </section>
</div>

<script>
  // Navbar toggle
  const hamburger = document.querySelector('.hamburger');
  const navLinks = document.querySelector('.nav-links');
  hamburger.addEventListener('click', () => {
    navLinks.classList.toggle('active');
    hamburger.classList.toggle('toggle');
  });

  // Preloader
  window.addEventListener('load', () => {
    const loader = document.getElementById('skeleton-loader');
    const content = document.getElementById('main-content');
    loader.style.display = 'none';
    content.style.display = 'block';
  });
</script>
</body>
</html>
